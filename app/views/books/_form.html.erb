<%= form_with(model: book) do |form| %>
  <% if book.errors.any? %>
    <div id="error_explanation" class="alert alert-danger">
      <h2><%= pluralize(book.errors.count, "error") %> запрещают сохранение этой книги:</h2>
      <ul>
        <% book.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>
  <div class="row">
    <div class="col-md-6">
      <div class="mb-3">
        <%= form.label :title, "Название книги", class: "form-label" %>
        <%= form.text_field :title, class: "form-control", required: true %>
      </div>
      <div class="mb-3">
        <%= form.label :author, "Автор", class: "form-label" %>
        <%= form.text_field :author, class: "form-control", required: true %>
      </div>
      <div class="mb-3">
        <%= form.label :publisher, "Издательство", class: "form-label" %>
        <%= form.text_field :publisher, class: "form-control" %>
      </div>
      <div class="mb-3">
        <%= form.label :year, "Год издания", class: "form-label" %>
        <%= form.number_field :year, class: "form-control", min: 0, max: Date.today.year %>
      </div>
      <div class="mb-3">
        <%= form.label :edition, "Издание", class: "form-label" %>
        <%= form.text_field :edition, class: "form-control", placeholder: "Например: 3-е издание" %>
      </div>
    </div>
    <div class="col-md-6">
      <div class="mb-3">
        <%= form.label :genre, "Жанр", class: "form-label" %>
        <%= form.text_field :genre, class: "form-control", placeholder: "Например: Роман, Фантастика, Детектив" %>
      </div>
      <div class="mb-3">
        <%= form.label :description, "Описание", class: "form-label" %>
        <%= form.text_area :description, class: "form-control", rows: 8, 
              placeholder: "Опишите сюжет, основные идеи, ваше впечатление от книги..." %>
        <small class="form-text text-muted">Максимум 2000 символов</small>
      </div>
    </div>
  </div>
  <div class="actions mt-4">
    <%= form.submit book.persisted? ? "Обновить книгу" : "Создать книгу", class: "btn btn-primary me-2" %>
    <%= link_to "Отмена", books_path, class: "btn btn-outline-secondary" %>
  </div>
<% end %>